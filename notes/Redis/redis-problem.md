#### 1、项目中使用redis的哪些方面？
答：
1、作为限流，可以对用户访问进行限流，防止用户刷接口，同时还对报警进行限流，防止相同的报警报警多次，可以使用滑动窗口算法，也可以使用令牌算法，令牌算法暂时没有使用，可以参考[python 基于redis的令牌桶限流](https://blog.csdn.net/u011519550/article/details/109246320)
2、分布式锁
3、数据库缓存
4、统计活跃用户，用zset
5、排行榜, zset, 这个待研究，不是自己写的
6、bitmap，统计测试管理平台的端口占用情况


#### 2、为啥Redis单线程模型也能效率这么高？
1）纯内存操作

Redis 将所有数据放在内存中，内存的响应时长大约为 100 纳秒，这是 redis 的 QPS 过万的重要基础。

2）核心是基于非阻塞的IO多路复用机制

有了非阻塞 IO 意味着线程在读写 IO 时可以不必再阻塞了，读写可以瞬间完成然后线程可以继续干别的事了。

redis 需要处理多个 IO 请求，同时把每个请求的结果返回给客户端。由于 redis 是单线程模型，同一时间只能处理一个 IO 事件，于是 redis 需要在合适的时间暂停对某个 IO 事件的处理，转而去处理另一个 IO 事件，这就需要用到IO多路复用技术了， 就好比一个管理者，能够管理个socket的IO事件，当选择了哪个socket，就处理哪个socket上的 IO 事件，其他 IO 事件就暂停处理了。

3）单线程反而避免了**多线程**的频繁**上下文切换**带来的性能问题。（百度多线程上下文切换）

第一，单线程可以简化数据结构和算法的实现。并发数据结构实现不但困难而且开发测试比较麻

第二，单线程避免了线程切换和竞态产生的消耗，对于服务端开发来说，**锁**和**线程切换**通常是性能杀手。

单线程的问题：对于每个命令的执行时间是有要求的。如果某个命令执行过长，会造成其他命令的阻塞，所以 redis 适用于那些需要**快速执行的场景**。

[Redis和多路复用模型](https://hogwartsrico.github.io/2020/06/24/Redis-and-Multiplexing/)