#### 消息队列满了怎么办？
思考
    是什么导致了消息积压？是consumer程序bug？是consumer消费的速度落后于消息生产的速度？
    积压了多长时间，积压了多少量？
    对业务的影响？

解决思路
1. 如果仅仅是consumer消费的速度落后于消息生产的速度的话，可以考虑采用扩容消费者群组的方式。
2. 如果积压比较严重，积压了上百万、上千万的消息。

    修复现有consumer的问题，并将其停掉。
    重新创建一个容量更大的topic，比如patition是原来的10倍。
    编写一个临时consumer程序，消费原来积压的队列。该consumer不做任何耗时的操作，将消息均匀写入新创建的队列里。
    将修复好的consumer部署到原来10倍的机器上消费新队列。
    消息积压解决后，恢复原有架构。

3. 如果消息已经丢失

由于有的消息队列有过期失效的机制，造成了大量的消息丢失。
这种情况只能将丢失的那批数据，写个临时程序，一点一点的查出来，然后重新灌入mq里面去。

[消息队列当产生了消息积压，如何处理？](https://www.jianshu.com/p/ee7b1a2a2e61)